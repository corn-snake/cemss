<span id="devOverlay">
    <select id="dev-scriptselect"></select>
    <button onclick="hotReload.script()">Reload script</button>
    &ensp;|&ensp;
    <select id="dev-styleselect"></select>
    <button onclick="hotReload.style()">Reload style</button>
    &ensp;|&ensp;
    <button onclick="reloadClassList()">Reload class list</button>
    &emsp;
    <button onclick="dumpLS()">Dump Local Storage</button>
</span>
<script>
    window.styleStore = [...(document.querySelectorAll("link[rel=stylesheet]"))].reduce((e,p)=>{
        if (((/(extension\:\/\/|chrome.*\:\/\/)/i)).test(p.attributes["href"].value)) return e;
        e[p.attributes["href"].value] = p;
        return e;
    },{});
    window.scriptStore = [...(document.querySelectorAll("script[src]"))].reduce((e,p)=>{
        if (((/(extension.*\:\/\/|chrome.*\:\/\/)/i)).test(p.attributes["src"].value)) return e;
        e[p.attributes["src"].value] = p;
        return e;
    },{});
    for (const i in styleStore) {
        let o = document.createElement("option");
        o.value = i;
        o.textContent = i;
        document.getElementById("dev-styleselect").appendChild(o);
    }
    for (const i in scriptStore) {
        let o = document.createElement("option");
        o.value = i;
        o.textContent = i;
        document.getElementById("dev-scriptselect").appendChild(o);
    }
    const hotReload = {
        script: () => {
            const v = document.getElementById("dev-scriptselect").value,
                temphr = v + "?rl=" + Date.now(),
                sp = scriptStore[v].parentElement;
            sp.removeChild(scriptStore[v]);
            const s = document.createElement("script");
            s.setAttribute("src", temphr);
            sp.appendChild(s);
            scriptStore[v] = s;
        },
        style: ()=>{
            const v = document.getElementById("dev-styleselect").value,
                temphr = v + "?rl=" + Date.now(),
                sp = styleStore[v].parentElement;
            sp.removeChild(styleStore[v]);
            const s = document.createElement("link");
            s.setAttribute("rel", "stylesheet");
            s.setAttribute("type", "text/css");
            s.setAttribute("href", temphr);
            sp.appendChild(s);
            styleStore[v] = s;
        }
    };
    const reloadClassList = () => fetch("/dev/classlistof", {method: "POST", body: `{"tkn": "${localStorage.getItem("tkn")}", "type": "${document.location.pathname.match(/(?<=\/).*(?=\/)?/i)[0]}"}`}).then(r=>r.text()).then(t=>document.querySelector(".groups-panel").innerHTML = t);
    const dumpLS = ()=> {
        for (let i = 0;i<localStorage.length;i+=1)
            console.log(localStorage.key(i), ": ", localStorage.getItem(localStorage.key(i)));
    };
    if (document.location.pathname.match(/(?<=\/).*(?=\/)?/i)[0].toLowerCase() === "alumnos") {
        let b = document.createElement("button");
        b.addEventListener("click",resetProgress);
        b.textContent = "Reset progress";
        document.getElementById("devOverlay").append("â€ƒ", b);
    }
</script>
<style>
    #devOverlay {
        display: block;
        text-align: center;
        position: fixed;
        width: 100dvw;
    }
    #devOverlay ~ * {
        top: 1.5em;
    }
</style>